<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Condition.html">Condition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Condition.html#processSync">processSync</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Configuration.html">Configuration</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="GotoScope.html">GotoScope</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="GotoScope.html#processSync">processSync</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="IfAllCondition.html">IfAllCondition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IfAllCondition.html#match">match</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IfAllCondition.html#processSync">processSync</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="IfExistCondition.html">IfExistCondition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IfExistCondition.html#match">match</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IfExistCondition.html#processSync">processSync</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="IfOnlyExistCondition.html">IfOnlyExistCondition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IfOnlyExistCondition.html#match">match</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IfOnlyExistCondition.html#processSync">processSync</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Instance.html">Instance</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#callHelper">callHelper</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#callHelperSync">callHelperSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#deleteNode">deleteNode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#gotoNodeSync">gotoNodeSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#insert">insert</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#insertAfter">insertAfter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#insertBefore">insertBefore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#matchFilesInPathsSync">matchFilesInPathsSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#noop">noop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#prepend">prepend</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#processSync">processSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#processWithNodeSync">processWithNodeSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#processWithOtherNodeSync">processWithOtherNodeSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#replace">replace</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#replaceWith">replaceWith</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Instance.html#testSync">testSync</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="NodeVersion.html">NodeVersion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeVersion.html#match">match</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeVersion.html#matchSync">matchSync</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="NpmVersion.html">NpmVersion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NpmVersion.html#match">match</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NpmVersion.html#matchSync">matchSync</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Rewriter.html">Rewriter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#.clear">clear</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#.fetch">fetch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#.register">register</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#addAffectedFile">addAffectedFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#addFile">addFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#addFileSync">addFileSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#addSnippet">addSnippet</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#addSnippetSync">addSnippetSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#configure">configure</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#ifNode">ifNode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#ifNpm">ifNpm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#process">process</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#processSync">processSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#processWithSandbox">processWithSandbox</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#processWithSandboxSync">processWithSandboxSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#removeFile">removeFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#removeFileSync">removeFileSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#test">test</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#testSync">testSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#withinFile">withinFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#withinFile">withinFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#withinFiles">withinFiles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rewriter.html#withinFilesSync">withinFilesSync</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Scope.html">Scope</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="UnlessExistCondition.html">UnlessExistCondition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UnlessExistCondition.html#match">match</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UnlessExistCondition.html#processSync">processSync</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WithinScope.html">WithinScope</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WithinScope.html#processSync">processSync</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#evalSnippet">evalSnippet</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#evalSnippetSync">evalSnippetSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#indent">indent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isValidFile">isValidFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isValidFileSync">isValidFileSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadSnippet">loadSnippet</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadSnippetSync">loadSnippetSync</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#rewriteSnippetToAsyncVersion">rewriteSnippetToAsyncVersion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#rewriteSnippetToSyncVersion">rewriteSnippetToSyncVersion</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>synvert-core-javascript</h1>
<img src="https://synvert.net/img/logo_96.png" alt="logo" width="32" height="32" />
<p><img src="https://github.com/xinminlabs/synvert-core-javascript/actions/workflows/main.yml/badge.svg" alt="Main workflow">
<a href="https://awesomecode.io/repos/xinminlabs/synvert-core-javascript"><img src="https://awesomecode.io/projects/24366d99-29b2-407f-a7b8-9773e59f8cd0/status" alt="AwesomeCode Status for xinminlabs/synvert-core-javascript"></a></p>
<p>Synvert core provides a set of DSLs to rewrite javascript code. e.g.</p>
<pre class="prettyprint source lang-javascript"><code>const Synvert = require(&quot;synvert-core&quot;);

new Synvert.Rewriter(&quot;jquery&quot;, &quot;deprecate-event-shorthand&quot;, () => {
  description('jQuery event shorthand is deprecated.');

  withinFiles(Synvert.ALL_FILES, function () {
    // $('#test').click(function(e) { });
    // =>
    // $('#test').on('click', function(e) { });
    findNode(`.CallExpression[callee=.MemberExpression[object IN (/^\\$/ /^jQuery/)][property=click]]
                [arguments.length=1][arguments.0.type IN (FunctionExpression ArrowFunctionExpression)]`, () => {
      replace(&quot;callee.property&quot;, { with: &quot;on&quot; });
      insert(&quot;'click', &quot;, { to: &quot;arguments.0&quot;, at: &quot;beginning&quot; });
    });

    // $form.submit();
    // =>
    // $form.trigger('submit');
    withNode(
      {
        nodeType: &quot;CallExpression&quot;,
        callee: { nodeType: &quot;MemberExpression&quot;, object: /^\$/, property: 'submit' },
        arguments: { length: 0 },
      },
      () => {
        replace([&quot;callee.property&quot;, &quot;arguments&quot;], { with: &quot;trigger('submit')&quot; });
      }
    );
  });
});
</code></pre>
<p>Want to see more examples, check out <a href="https://github.com/xinminlabs/synvert-snippets-javascript">synvert-snippets-javascript</a>.</p>
<p>Want to use the CLI, check out <a href="https://github.com/xinminlabs/synvert-javascript">synvert-javascript</a>.</p>
<p>By default, you can't run the above snippet directly, synvert-core provides 2 utilities to convert it to sync and async verions.</p>
<pre class="prettyprint source lang-javascript"><code>Synvert.rewriteSnippetToSyncVersion(snippetSourceCode);

// Then it converts snippet code to the following sync version

const Synvert = require(&quot;synvert-core&quot;);

new Synvert.Rewriter(&quot;jquery&quot;, &quot;deprecate-event-shorthand&quot;, function () {
  this.description('jQuery event shorthand is deprecated.');

  this.withinFilesSync(Synvert.ALL_FILES, function () {
    // $('#test').click(function(e) { });
    // =>
    // $('#test').on('click', function(e) { });
    this.findNode(`.CallExpression[callee=.MemberExpression[object IN (/^\\$/ /^jQuery/)][property=click]]
                [arguments.length=1][arguments.0.type IN (FunctionExpression ArrowFunctionExpression)]`, () => {
      this.replace(&quot;callee.property&quot;, { with: &quot;on&quot; });
      this.insert(&quot;'click', &quot;, { to: &quot;arguments.0&quot;, at: &quot;beginning&quot; });
    });

    // $form.submit();
    // =>
    // $form.trigger('submit');
    this.withNode(
      {
        nodeType: &quot;CallExpression&quot;,
        callee: { nodeType: &quot;MemberExpression&quot;, object: /^\$/, property: 'submit' },
        arguments: { length: 0 },
      },
      () => {
        this.replace([&quot;callee.property&quot;, &quot;arguments&quot;], { with: &quot;trigger('submit')&quot; });
      }
    );
  });
});
</code></pre>
<pre class="prettyprint source lang-javascript"><code>Synvert.rewriteSnippetToAsyncVersion(snippetSourceCode);

// Then it converts snippet code to the following async version

const Synvert = require(&quot;synvert-core&quot;);

new Synvert.Rewriter(&quot;jquery&quot;, &quot;deprecate-event-shorthand&quot;, async function () {
  this.description('jQuery event shorthand is deprecated.');

  await this.withinFiles(Synvert.ALL_FILES, async function () {
    // $('#test').click(function(e) { });
    // =>
    // $('#test').on('click', function(e) { });
    this.findNode(`.CallExpression[callee=.MemberExpression[object IN (/^\\$/ /^jQuery/)][property=click]]
                [arguments.length=1][arguments.0.type IN (FunctionExpression ArrowFunctionExpression)]`, () => {
      this.replace(&quot;callee.property&quot;, { with: &quot;on&quot; });
      this.insert(&quot;'click', &quot;, { to: &quot;arguments.0&quot;, at: &quot;beginning&quot; });
    });

    // $form.submit();
    // =>
    // $form.trigger('submit');
    this.withNode(
      {
        nodeType: &quot;CallExpression&quot;,
        callee: { nodeType: &quot;MemberExpression&quot;, object: /^\$/, property: 'submit' },
        arguments: { length: 0 },
      },
      () => {
        this.replace([&quot;callee.property&quot;, &quot;arguments&quot;], { with: &quot;trigger('submit')&quot; });
      }
    );
  });
});
</code></pre>
<p>DSL are as follows</p>
<ul>
<li><a href="./Rewriter.html#configure">configure</a> - configure the rewriter, set sourceTyep and parser</li>
<li><a href="./Rewriter.html#description">description</a> - set description of the rewriter</li>
<li><a href="./Rewriter.html#ifNode">ifNode</a> - check if node version is greater than or equal to the specified node version</li>
<li><a href="./Rewriter.html#ifNpm">ifNpm</a> - check the version of the specifid npm package</li>
<li><a href="./Rewriter.html#addFileSync">addFileSync</a> - sync to add a new file</li>
<li><a href="./Rewriter.html#addFile">addFile</a> - async to add a new file</li>
<li><a href="./Rewriter.html#removeFileSync">removeFileSync</a> - sync to remove a file</li>
<li><a href="./Rewriter.html#removeFile">removeFile</a> - async to remove a file</li>
<li><a href="./Rewriter.html#withinFiles">withinFilesSync</a> - sync to find specified files</li>
<li><a href="./Rewriter.html#withinFiles">withinFiles</a> - async to find specified files</li>
<li><a href="./Rewriter.html#withinFile">withinFileSync</a> - alias to withinFilesSync</li>
<li><a href="./Rewriter.html#withinFile">withinFile</a> - alias to withinFiles</li>
<li><a href="./Rewriter.html#addSnippetSync">addSnippetSync</a> - sync to call another snippet</li>
<li><a href="./Rewriter.html#addSnippet">addSnippet</a> - sync to call another snippet</li>
</ul>
<p>Scopes:</p>
<ul>
<li><a href="./Instance.html#withNodes">withNodes</a> - recursively find matching ast nodes</li>
<li><a href="./Instance.html#withNode">withNode</a> - alias to withNode</li>
<li><a href="./Instance.html#findNode">findNode</a> - alias to withNode</li>
<li><a href="./Instance.html#gotoNode">gotoNode</a> - go to a child node</li>
</ul>
<p>Conditions:</p>
<ul>
<li><a href="./Instance.html#ifExistNode">ifExistNode</a> - check if matching node exist in the child nodes</li>
<li><a href="./Instance.html#unlessExistNode">unlessExistNode</a> - check if matching node does not exist in the child nodes</li>
<li><a href="./Instance.html#ifOnlyExistNode">ifOnlyExistNode</a> - check if current node has only one child node and the child node matches</li>
<li><a href="./Instance.html#ifAlNodes">ifAllNodes</a> - check if all nodes match or not</li>
</ul>
<p>Actions:</p>
<ul>
<li><a href="./Instance.html#append">append</a> - append the code to the bottom of the current node body</li>
<li><a href="./Instance.html#prepend">prepend</a> - prepend the code to the top of the current node body</li>
<li><a href="./Instance.html#insert">insert</a> - insert code</li>
<li><a href="./Instance.html#insertAfter">insertAfter</a> - insert the code next to the current node</li>
<li><a href="./Instance.html#insertBefore">insertBefore</a> - insert the code previous to the current node</li>
<li><a href="./Instance.html#replace">replace</a> - replace the code of specified child nodes</li>
<li><a href="./Instance#deleteNode">deleteNode</a> - delete code the code of specified child nodes</li>
<li><a href="./Instance.html#remove">remove</a> - remove the whole code of current node</li>
<li><a href="./Instance.html#replaceWith">replaceWith</a> - replace the whole code of current node</li>
<li><a href="./Instance.html#noop">noop</a> - no operation</li>
</ul>
<p>Others:</p>
<ul>
<li><a href="./Instance.html#callHelperSync">callHelperSync</a> - sync to call a helper to run shared code</li>
<li><a href="./Instance.html#callHelper">callHelper</a> - async to call a helper to run shared code</li>
<li><a href="./Instance.html#mutationAdapter">mutationAdapter</a> - get a <a href="https://github.com/xinminlabs/node-mutation-javascript/blob/main/src/adapter.ts">mutation adapter</a> to get some helpers</li>
</ul></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Mon Dec 12 2022 12:06:48 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>